const lang=e=>e&&chrome.i18n.getMessage(e),translate=e=>{e.querySelectorAll("[data-i18n]").forEach(e=>{const t=e.getAttribute("data-i18n");e.textContent=lang(t)}),e.querySelectorAll("[html-i18n]").forEach(e=>{const t=e.getAttribute("html-i18n");e.innerHTML=lang(t)}),e.querySelectorAll("[attr-i18n]").forEach(e=>{const[t,n]=e.getAttribute("attr-i18n").split("=");e.setAttribute(t,lang(n))})},Alert2=e=>{let t;return fetch(chrome.runtime.getURL("resources/alert.html")).then(e=>e.text()).then(e=>{t=document.createElement("div"),t.innerHTML=e,t=t.firstElementChild,t.querySelector(".alert-close").onclick=()=>{t.style.display="none"}}),(n,r,o="")=>{t.classList.remove("success","error"),t.classList.add(1===n?"success":"error"),t.querySelector(".alert-title").textContent=r,t.querySelector(".alert-message").textContent=o,t.style.display="block",t.isConnected||e()?.appendChild(t)}},Confirm2=e=>{let t;return fetch(chrome.runtime.getURL("resources/confirm.html")).then(e=>e.text()).then(e=>{t=document.createElement("div"),t.innerHTML=e,t=t.firstElementChild,translate(t)}),async(n="")=>{const r=t;return r.querySelector(".confirm-message").textContent=n,r.style.display="",new Promise((t,n)=>{const o=e();o?o.appendChild(r):n(Error("Parent not exist")),r.querySelector(".no").onclick=()=>{r.style.display="none",t(!1)},r.querySelector(".ok").onclick=()=>{r.style.display="none",t(!0)}})}},setLoginInfo=e=>chrome.storage.local.set({loginInfo:{email:e,time:(new Date).getTime()}}),removeLoginInfo=()=>{chrome.storage.local.remove("loginInfo")},trialDuration=6048e5,forPress=function({el:e,down:t=()=>!0,move:n,up:r=()=>{}}){const o=function(e){if(!t(e))return;document.body.setAttribute("disselect","");const o=function(e){document.body.removeAttribute("disselect"),n&&document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",o),r(e)};n&&document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)};e.addEventListener("mousedown",o);return()=>{e.removeEventListener("mousedown",o)}};