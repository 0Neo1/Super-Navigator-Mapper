window.fullScreenFn=(()=>{function e(e,n){let o=e,r=[];for(;o&&1===o.nodeType;){const e=getComputedStyle(o)[n];if(e&&"rgba(0, 0, 0, 0)"!==e&&"transparent"!==e&&r.push(e),"backgroundColor"===n&&e&&"rgba(0, 0, 0, 0)"!==e&&"transparent"!==e)break;o=o.parentElement}if(0===r.length||"rgba"===r[r.length-1].slice(0,4)){const e="backgroundColor"===n?"rgb(255, 255, 255)":"rgb(0, 0, 0)";r.push(e)}return 1===r.length?r[0]:r.reverse().reduce((e,n)=>function(e,n){const o=t(e),r=t(n);if(1===r.a)return`rgb(${r.r}, ${r.g}, ${r.b})`;const s=1-(1-r.a)*(1-o.a),i=Math.round((r.r*r.a+o.r*o.a*(1-r.a))/s),a=Math.round((r.g*r.a+o.g*o.a*(1-r.a))/s),c=Math.round((r.b*r.a+o.b*o.a*(1-r.a))/s);return`rgb(${i}, ${a}, ${c})`}(e,n))}function t(e){let t=e.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?\)$/);return t?{r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3]),a:void 0===t[4]?1:parseFloat(t[4])}:{r:0,g:0,b:0,a:1}}const n="plug-in-full-screen";let o,r,s,i,a=0,c=1;function u(e){if(e===r)return;r=e,s||(s=document.createElement("div"),s.style="transition:top 100ms,left 100ms,width 100ms,height 100ms;\n                                                pointer-events: none;\n                                                position: fixed;\n                                                z-index: 100000000000000;\n                                                top: 0;\n                                                left: 0;\n                                                width: 0;\n                                                height: 0;\n                                                padding: 0;\n                                                margin: 0;\n                                                background: rgb(255 238 0 / 27%);\n                                                border: 4px solid rgb(5 6 251 / 46%);",s.innerHTML=`<span style="font-size:14px;position: absolute;left: -4px;top: -2.5em;white-space: nowrap;pointer-events: none;background: #000000c0;color: #fff;padding:0.2em 0.5em;border-radius: 2px;">${chrome.i18n.getMessage("capture")}</span>`,document.body.appendChild(s));const{x:t,y:n,width:o,height:i}=r.getBoundingClientRect();s.style.top=`${n}px`,s.style.left=`${t}px`,s.style.height=`${i}px`,s.style.width=`${o}px`}function l(){if(i&&i(),r&&r.constructor!==HTMLDialogElement)try{document.addEventListener("fullscreenchange",b,!0),r.requestFullscreen({navigationUI:"show"})}catch(e){throw document.removeEventListener("fullscreenchange",b,!0),e}}function d(e){e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),e.deltaY<0?(c+=.2,c=c>5?5:c,r.style.zoom=c):(c-=.2,c=c<.5?.5:c,r.style.zoom=c))}function m(e){e.stopPropagation(),e.preventDefault(),i&&i()}function p(e){if(0!==a)return;e.stopPropagation(),e.preventDefault();let t=document.elementFromPoint(e.clientX,e.clientY);if(!t.closest("dialog")){{const e=t.closest("code");if(e)t=e;else for(;;){const e=t.tagName.toUpperCase();if(!["P","SPAN","A","H1","H2","H3","H4","H5","H6","INPUT","LABEL","STRONG","B","I","U"].includes(e))break;t=t.parentElement}}o=t,u(t)}}function g(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),a=1)}function v(e){a<=0||(e.stopPropagation(),e.preventDefault(),a=-1,l())}function f(e){if(!(a<=0)){e.stopPropagation(),e.preventDefault(),a=2;{let t=e.target;for(;t;){const e=t.compareDocumentPosition(o);if(t===o){u(t);break}if(e&Node.DOCUMENT_POSITION_CONTAINED_BY){u(t);break}t=t.parentElement}}}}function h(e){"ESCAPE"===e.key.toUpperCase()&&m(e)}function E(e){m(e)}function b(t){if(document.fullscreenElement){if(r!==document.documentElement){r.setAttribute(n,"");const t=e(r,"backgroundColor"),o=e(r,"color");r.style.setProperty("--fullscreen-background-color",t),r.style.setProperty("--fullscreen-text-color",o)}!function(){const e=document.createElement("dialog");e.classList.add("zoom-reminder"),e.innerHTML=`\n                                                <div>\n                                                        <p>${chrome.i18n.getMessage("zoomPageTitle")}<span>${chrome.i18n.getMessage("zoomPageContent")}</span></p>\n                                                </div>`,document.querySelector(".catalogeu-navigation-plugin-floatbar").appendChild(e),e.showModal();const t=()=>{e.close(),e.remove()};e.children[0].addEventListener("mouseenter",()=>{clearTimeout(n)}),e.children[0].addEventListener("mouseleave",t);const n=setTimeout(t,1e3)}(),window.removeEventListener("wheel",d,{passive:!1,capture:!0}),window.addEventListener("wheel",d,{passive:!1,capture:!0})}else r!==document.documentElement&&(r.removeAttribute(n),r.style.removeProperty("--fullscreen-background-color"),r.style.removeProperty("--fullscreen-text-color")),r.style.zoom="",document.documentElement.style.zoom="",window.removeEventListener("wheel",d,{passive:!1,capture:!0}),document.removeEventListener("fullscreenchange",b,!0)}return Object.freeze({capturing(e){a=0,c=1,document.addEventListener("mousemove",p,!0),document.addEventListener("mousedown",g,!0),document.addEventListener("mousemove",f,!0),document.addEventListener("mouseup",v,!0),document.addEventListener("keydown",h,!0),document.addEventListener("contextmenu",E,!0),i=()=>{e&&e(),function(e){e&&s&&(s.remove(),s=void 0)}(r),document.removeEventListener("mousemove",p,!0),document.removeEventListener("mousedown",g,!0),document.removeEventListener("mousemove",f,!0),document.removeEventListener("mouseup",v,!0),document.removeEventListener("keydown",h,!0),document.removeEventListener("contextmenu",E,!0),i=void 0,o=void 0,s&&(s.remove(),s=void 0)}},toFullscreen(){r=document.documentElement,document.fullscreenElement?document.exitFullscreen():l()}})})();